/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package br.com.tamarozzi.ui;

import br.com.tamarozzi.interfaces.Observer;
import br.com.tamarozzi.model.UsuarioLogado;
import br.com.tamarozzi.util.ButtonTabComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;

/**
 *
 * @author Panda
 */
public class FrmPrincipal extends javax.swing.JFrame {

    /**
     * Creates new form FrmPrincipal
     */
    public FrmPrincipal() {
        initComponents();
        setComponents();        
    }
    
    private void setComponents() {
        this.tabMenuGeral.removeAll();
        //this.setExtendedState(JFrame.MAXIMIZED_BOTH);
        this.setBothTool();
        
        this.tabPessoa.registerObserver(new Observer() {
            @Override
            public void update(Object obj) {
                tabPessoa.editPessoa();
            }
        });
        
        this.tabBanco.registerObserver(new Observer() {
            @Override
            public void update(Object obj) {
                tabBanco.editBanco();
            }
        });
        
        this.tabConta.registerObserver(new Observer() {
            @Override
            public void update(Object obj) {
                tabConta.editItem();
            }
        });
    }
    
    private void setBothTool() {
        this.lblUsuario.setText(UsuarioLogado.getInstance().getNome());
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        pnlGeral = new javax.swing.JPanel();
        toolBarGeral = new javax.swing.JToolBar();
        btnPessoa = new javax.swing.JButton();
        jSeparator4 = new javax.swing.JToolBar.Separator();
        btnMensalidade = new javax.swing.JButton();
        tabMenuGeral = new javax.swing.JTabbedPane();
        tabPessoa = new br.com.tamarozzi.ui.panel.PanelPessoa();
        tabBanco = new br.com.tamarozzi.ui.panel.PanelBanco();
        tabConta = new br.com.tamarozzi.ui.panel.PanelConta();
        bothBar = new javax.swing.JSplitPane();
        lblVersao = new javax.swing.JLabel();
        lblUsuario = new javax.swing.JLabel();
        menuBar = new javax.swing.JMenuBar();
        menuCadastro = new javax.swing.JMenu();
        itemBancoCadastro = new javax.swing.JMenuItem();
        itemContaCadastro = new javax.swing.JMenuItem();
        itemPessoaCadastro = new javax.swing.JMenuItem();
        menuFerramenta = new javax.swing.JMenu();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("AcademiaSIG - Principal");
        setMinimumSize(new java.awt.Dimension(756, 572));
        setSize(new java.awt.Dimension(756, 572));

        toolBarGeral.setFloatable(false);
        toolBarGeral.setRollover(true);

        btnPessoa.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagens/pessoa-icon.png"))); // NOI18N
        btnPessoa.setText("Pessoas");
        btnPessoa.setFocusable(false);
        btnPessoa.setHorizontalTextPosition(javax.swing.SwingConstants.RIGHT);
        btnPessoa.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        btnPessoa.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnPessoaActionPerformed(evt);
            }
        });
        toolBarGeral.add(btnPessoa);
        toolBarGeral.add(jSeparator4);

        btnMensalidade.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagens/calendario-icon.png"))); // NOI18N
        btnMensalidade.setText("Mensalidades");
        btnMensalidade.setFocusable(false);
        btnMensalidade.setHorizontalTextPosition(javax.swing.SwingConstants.RIGHT);
        btnMensalidade.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        toolBarGeral.add(btnMensalidade);

        tabMenuGeral.addTab("Pessoas", tabPessoa);
        tabMenuGeral.addTab("Bancos", tabBanco);

        tabConta.setName("Contas"); // NOI18N
        tabMenuGeral.addTab("Contas", tabConta);

        bothBar.setDividerSize(3);
        bothBar.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));

        lblVersao.setText("Vers√£o: 1.0.0");
        lblVersao.setPreferredSize(new java.awt.Dimension(150, 14));
        bothBar.setLeftComponent(lblVersao);
        lblVersao.getAccessibleContext().setAccessibleParent(bothBar);

        bothBar.setRightComponent(lblUsuario);

        javax.swing.GroupLayout pnlGeralLayout = new javax.swing.GroupLayout(pnlGeral);
        pnlGeral.setLayout(pnlGeralLayout);
        pnlGeralLayout.setHorizontalGroup(
            pnlGeralLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(tabMenuGeral)
            .addComponent(bothBar)
            .addComponent(toolBarGeral, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        pnlGeralLayout.setVerticalGroup(
            pnlGeralLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(pnlGeralLayout.createSequentialGroup()
                .addComponent(toolBarGeral, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(tabMenuGeral)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(bothBar, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
        );

        menuCadastro.setText("Cadastro");

        itemBancoCadastro.setText("Bancos");
        itemBancoCadastro.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                itemBancoCadastroActionPerformed(evt);
            }
        });
        menuCadastro.add(itemBancoCadastro);

        itemContaCadastro.setText("Contas");
        itemContaCadastro.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                itemContaCadastroActionPerformed(evt);
            }
        });
        menuCadastro.add(itemContaCadastro);

        itemPessoaCadastro.setIcon(new javax.swing.ImageIcon(getClass().getResource("/imagens/pessoa-icon.png"))); // NOI18N
        itemPessoaCadastro.setText("Pessoas");
        itemPessoaCadastro.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                itemPessoaCadastroActionPerformed(evt);
            }
        });
        menuCadastro.add(itemPessoaCadastro);

        menuBar.add(menuCadastro);

        menuFerramenta.setText("Ferramentas");
        menuBar.add(menuFerramenta);

        setJMenuBar(menuBar);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(pnlGeral, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(pnlGeral, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void itemBancoCadastroActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_itemBancoCadastroActionPerformed
        this.addTabMenuGeral(this.tabBanco);
    }//GEN-LAST:event_itemBancoCadastroActionPerformed

    private void itemPessoaCadastroActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_itemPessoaCadastroActionPerformed
        this.addTabMenuGeral(this.tabPessoa);
    }//GEN-LAST:event_itemPessoaCadastroActionPerformed

    private void btnPessoaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnPessoaActionPerformed
        this.addTabMenuGeral(this.tabPessoa);
    }//GEN-LAST:event_btnPessoaActionPerformed

    private void itemContaCadastroActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_itemContaCadastroActionPerformed
        this.addTabMenuGeral(this.tabConta);
    }//GEN-LAST:event_itemContaCadastroActionPerformed
        
    public void addTabMenuGeral(JPanel p) {
        int index = this.tabMenuGeral.indexOfComponent(p);

        if(index == -1) {
            this.tabMenuGeral.addTab(p.getName(), p);
            this.tabMenuGeral.setTabComponentAt(
                this.tabMenuGeral.indexOfComponent(p),
                new ButtonTabComponent(this.tabMenuGeral));
        }

        this.tabMenuGeral.setSelectedComponent(p);
    }
    
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(FrmPrincipal.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(() -> {
            new FrmPrincipal().setVisible(true);
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JSplitPane bothBar;
    private javax.swing.JButton btnMensalidade;
    private javax.swing.JButton btnPessoa;
    private javax.swing.JMenuItem itemBancoCadastro;
    private javax.swing.JMenuItem itemContaCadastro;
    private javax.swing.JMenuItem itemPessoaCadastro;
    private javax.swing.JToolBar.Separator jSeparator4;
    private javax.swing.JLabel lblUsuario;
    private javax.swing.JLabel lblVersao;
    private javax.swing.JMenuBar menuBar;
    private javax.swing.JMenu menuCadastro;
    private javax.swing.JMenu menuFerramenta;
    private javax.swing.JPanel pnlGeral;
    private br.com.tamarozzi.ui.panel.PanelBanco tabBanco;
    private br.com.tamarozzi.ui.panel.PanelConta tabConta;
    private javax.swing.JTabbedPane tabMenuGeral;
    private br.com.tamarozzi.ui.panel.PanelPessoa tabPessoa;
    private javax.swing.JToolBar toolBarGeral;
    // End of variables declaration//GEN-END:variables
}
